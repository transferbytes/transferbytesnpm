XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;var ROOT="https://www.transferbytes.io/co/transfering/call/ident/i=";function uploadImages(e){if(void 0==e)return Promise.resolve(e).then(()=>"");var t=[];for(i=0;i<e.length;i++)e[i]instanceof Object&&t.push(sendFile(e[i].id,e[i]));return resolveAllpromises(t,e)}function resolveAllpromises(e,t){return Promise.all(e).then(e=>{for(promiseCount=0,i=0;i<t.length;i++)t[i]instanceof Object&&(t[i]=e[promiseCount],promiseCount++);return t})}function sendFile(e,t){return new Promise(function(n,o){var r=new FormData,s=new XMLHttpRequest,a=document.getElementById(e).files[0];r.append("file",a),r.append("data",JSON.stringify(t)),s.open("POST",ROOT+"uploadFiles",!0),s.setRequestHeader("Action","uploadFiles"),s.send(r),s.onreadystatechange=function(){s.readyState==s.DONE&&(200==s.status?n(s.responseText):400==s.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))}}).then(function(e){return e})}module.exports={connect:function(e,t,n,o){return o=o||0,uploadImages(n).then(function(n){return new Promise(function(r,s){var a=new XMLHttpRequest,i="data="+JSON.stringify({content:n,languaje:t,postId:o});a.onreadystatechange=function(){a.readyState==a.DONE&&(200==a.status?r(a.responseText):400==a.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))},a.open("POST",ROOT+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("Action",e),a.send(i)}).then(function(e){return JSON.parse(e)})})},delete:function(e){return e=e||0,new Promise(function(t,n){var o=new XMLHttpRequest,r="data="+JSON.stringify({postId:e});o.onreadystatechange=function(){o.readyState==o.DONE&&(200==o.status?t(o.responseText):400==o.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))},o.open("POST",ROOT+e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Action","deletePost"),o.send(r)}).then(function(e){return e})}};