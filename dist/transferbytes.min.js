XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;var ROOT="https://www.transferbytes.io/",transferBytes={connect:function({id:e,license:t,languaje:n,content:o,idPost:s}){return s=s||0,uploadImages(o).then(function(o){return new Promise(function(r,i){var a=new XMLHttpRequest,u="data="+JSON.stringify({content:o,languaje:n,postId:s,license:t});a.onreadystatechange=function(){a.readyState==a.DONE&&(200==a.status?r(a.responseText):400==a.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))},a.open("POST",ROOT+"co/transfering/call/ident/i="+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("Action",e),a.send(u)}).then(function(e){return JSON.parse(e)})})},delete:function({license:e,idPost:t}){return t=t||0,new Promise(function(n,o){var s=new XMLHttpRequest,r="data="+JSON.stringify({postId:t,license:e});s.onreadystatechange=function(){s.readyState==s.DONE&&(200==s.status?n(s.responseText):400==s.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))},s.open("POST",ROOT+"co/transfering/call/ident/i="+t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("Action","deletePost"),s.send(r)}).then(function(e){return e})}};function uploadImages(e){if(void 0==e)return Promise.resolve(e).then(()=>"");var t=[];for(i=0;i<e.length;i++)e[i]instanceof Object&&t.push(sendFile(e[i].id,e[i]));return resolveAllpromises(t,e)}function resolveAllpromises(e,t){return Promise.all(e).then(e=>{for(promiseCount=0,i=0;i<t.length;i++)t[i]instanceof Object&&(t[i]=e[promiseCount],promiseCount++);return t})}function sendFile(e,t){return new Promise(function(n,o){var s=new FormData,r=new XMLHttpRequest,i=document.getElementById(e).files[0];s.append("file",i),s.append("data",JSON.stringify(t)),r.open("POST",ROOT+"co/transfering/call/ident/i=uploadFiles",!0),r.setRequestHeader("Action","uploadFiles"),r.send(s),r.onreadystatechange=function(){r.readyState==r.DONE&&(200==r.status?n(r.responseText):400==r.status?console.log("There was an error 400"):console.log("Something else other than 200 was returned"))}}).then(function(e){return e})}